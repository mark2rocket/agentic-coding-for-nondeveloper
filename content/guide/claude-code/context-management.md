---
title: "4-11. 컨텍스트 윈도우 관리"
order: 11
---

클로드 코드(Claude Code)를 사용하다 보면 대화가 길어질수록 AI가 느려지거나, 앞의 내용을 잊어버리거나(문맥 손실), 토큰 비용이 급증하는 문제를 겪게 됩니다.

이는 제한된 **컨텍스트 윈도우(기억 용량)** 때문입니다.

## 컨텍스트 윈도우란?

<Callout type="info" title="책상 위 공간으로 이해하기">

컨텍스트 윈도우는 AI가 한 번에 볼 수 있는 **책상 위의 공간**과 같습니다.

- 책상이 넓으면 (컨텍스트가 크면) 여러 자료를 동시에 펼쳐놓고 작업 가능
- 책상이 좁으면 (컨텍스트가 작으면) 자료를 계속 치워가며 작업해야 함
- 책상이 어질러지면 (컨텍스트가 가득 차면) 효율이 떨어짐

</Callout>

**용량 가이드**:
- 전체 한계: 200,000 토큰
- 품질 유지 범위: **20-40% 미만**
- ⚠️ 주의: 용량이 꽉 차기 전부터 품질이 저하됩니다

**품질 저하 신호**:
```
- 이전 대화 내용을 잊어버림
- 같은 질문을 반복함
- /compact 후에도 결과가 부진함
- 응답 속도가 느려짐
```

---

## 컨텍스트 효율 관리 5가지 핵심 꿀팁

컨텍스트를 효율적으로 관리하여 **비용은 아끼고 성능은 유지**하는 방법을 소개합니다.

### 1. "기억하고 비우기" 전략 (/compact & /clear)

가장 기본적이면서도 강력한 방법은 주기적으로 대화 내용을 압축하거나 비우는 것입니다.

<LevelBox>

**`/compact` (압축)**

대화가 길어졌을 때 이 명령어를 입력하면, 클로드 코드가 지금까지의 대화 내용을 요약하여 컨텍스트를 줄입니다.

- **사용 시점:** 컨텍스트가 20~40% 정도 찼을 때
- **효과:** 컨텍스트를 유지하면서 용량 절약

**`/clear` (비우기)**

하나의 기능 구현이 끝났다면 과감하게 `/clear`를 입력해 대화 기록을 날리세요.

- **주의:** 무작정 지우면 작업 연속성이 끊어집니다!

</LevelBox>

#### handoff.md 활용 (인수인계 문서)

<LevelBox>

**비우기 전 인수인계 하기:**

1. `/clear` 하기 전에 다음과 같이 요청:
   ```
   지금까지 작업한 내용, 진행 상황, 다음에 해야 할 일을
   handoff.md 파일에 저장해줘
   ```

2. `/clear` 실행

3. 새 세션에서 다음과 같이 요청:
   ```
   handoff.md 읽고 이어서 작업해
   ```

**효과:** 토큰은 비우면서도 작업의 연속성은 유지할 수 있습니다.

</LevelBox>

---

### 2. 프로젝트의 두뇌, CLAUDE.md 최적화

<LevelBox>

매번 "한글로 대답해", "코드는 이런 스타일로 짜"라고 말하면 그만큼 토큰이 낭비됩니다.

프로젝트의 규칙을 담은 `CLAUDE.md` 파일을 잘 관리해야 합니다.

**역할:**
- 클로드 코드는 세션을 시작할 때마다 이 파일을 가장 먼저 읽습니다
- 프로젝트 구조, 코딩 컨벤션, 자주 쓰는 명령어 등을 적어두면 매번 설명할 필요가 없어 컨텍스트를 아낄 수 있습니다

**작성 팁:**
- `/init` 명령어를 치면 클로드 코드가 프로젝트를 분석해 초안을 만들어줍니다
- 필요한 규칙 추가 (예: "결과는 무조건 한글로", "테스트 코드 필수")
- **주의:** 너무 길게 쓰면 오히려 토큰을 잡아먹으니 **핵심만 간결하게** 유지

</LevelBox>

---

### 3. 서브에이전트(Subagent)로 컨텍스트 분리

<LevelBox>

복잡한 작업을 메인 창에서 다 처리하면 컨텍스트가 금방 오염됩니다.

이럴 때 **서브에이전트**를 사용하세요.

**원리:**
- 서브에이전트는 메인 에이전트와 **완전히 분리된 독립적인 컨텍스트**를 가집니다

**활용 예시:**

"코드 리뷰해줘"라고 서브에이전트에게 시키면:
- 서브에이전트가 수많은 파일을 읽고 분석해도
- **메인 대화창의 컨텍스트는 늘어나지 않습니다**
- 서브에이전트는 작업 후 **'요약된 결과'만 메인 창에 보고**

</LevelBox>

---

### 4. 스킬(Skill)의 "점진적 로딩" 활용

<LevelBox>

자주 쓰는 프롬프트나 작업을 **스킬(Skill)**로 만들어두면 토큰 효율이 극대화됩니다.

**점진적 공개 (Progressive Disclosure):**
- 스킬은 등록해둬도 처음에는 **제목과 설명(메타데이터)만 로드**되어 토큰을 거의 쓰지 않습니다 (약 100 토큰)
- 실제로 그 스킬을 사용할 때만 전체 내용을 불러옵니다

**비교:**
- ❌ 긴 프롬프트를 매번 채팅창에 붙여넣기 → 그만큼 토큰을 계속 소비
- ✅ 스킬로 만들어두기 → 사용할 때만 읽으므로 훨씬 경제적

</LevelBox>

---

### 5. MCP 도구 최적화 (Tool Search)

<LevelBox>

MCP(외부 도구 연동)를 많이 설치하면 사용하지 않아도 기본적으로 토큰을 차지합니다.

- 최대 **30%까지 차지**할 수 있음

**툴 서치(Tool Search) 활성화:**

최신 클로드 코드에는 MCP 도구를 **필요할 때만 검색해서 로드**하는 기능이 있습니다.

- 환경 변수 설정: `ENABLE_TOOL_SEARCH=true`
- 또는 컨텍스트가 일정 수준(10%) 이상 차면 자동으로 활성화
- 불필요한 도구 로딩을 막아줌

**명령어 방식 활용:**
- MCP 도구를 테이블(컨텍스트) 위에 올려두는 대신
- 필요할 때만 명령어로 꺼내 쓰는 방식으로 작업 공간을 확보

</LevelBox>

---

## 컨텍스트 관리 체크리스트

<Callout type="success" title="효과적인 컨텍스트 관리를 위한 체크리스트">

- [ ] 컨텍스트 20-40% 찼을 때 `/compact` 실행
- [ ] 작업 완료 후 `handoff.md`에 저장하고 `/clear`
- [ ] 반복되는 규칙은 `CLAUDE.md`에 작성
- [ ] 복잡하고 긴 문서를 읽어야 할 때는 서브에이전트에게 위임
- [ ] 자주 쓰는 프롬프트는 스킬로 등록
- [ ] 사용하지 않는 MCP 도구 정리

</Callout>

---

## 관리 전략 요약표

| 전략 | 실행 방법 | 효과 |
|------|---------|------|
| **압축** | `/compact` 실행 | 대화 요약, 용량 절약 |
| **비우기** | `/clear` + `handoff.md` 활용 | 신선한 시작, 연속성 유지 |
| **규칙 문서화** | `CLAUDE.md` 작성 | 반복 설명 불필요 |
| **작업 분리** | 서브에이전트 활용 | 메인 컨텍스트 보호 |
| **점진적 로딩** | 스킬 등록 | 필요시에만 토큰 사용 |
| **도구 최적화** | Tool Search 활성화 | MCP 도구 효율 관리 |

---

**중요 특성**: Claude는 stateless(상태 비저장). 매 대화마다 제공된 정보만으로 작업합니다.

<Callout type="tip" title="한줄 요약">
작업이 끝나면 handoff.md에 저장하고 /clear 하세요. 반복되는 규칙은 CLAUDE.md에 적으세요.
</Callout>
